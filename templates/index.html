<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Module 1 ‚Äì Camera Calibration & Object Measurement</title>

  <style>
    body {
      font-family: system-ui, Arial;
      background: #f5f6fa;
      margin: 0;
      padding: 40px 30px;
      max-width: 1100px;
      margin-left: auto;
      margin-right: auto;
    }

    h2 {
      font-size: 32px;
      margin-bottom: 25px;
      font-weight: 700;
      color: #1e40af;
    }

    section {
      background: white;
      border-radius: 12px;
      padding: 28px 34px;
      margin-bottom: 40px;
      box-shadow: 0 4px 14px rgba(0,0,0,0.10);
    }

    h3 {
      font-size: 22px;
      margin-top: 0;
      margin-bottom: 14px;
    }

    p {
      margin-top: 0;
      margin-bottom: 14px;
      color: #444;
    }

    label {
      display: inline-block;
      margin: 6px 0;
      font-size: 14px;
      color: #333;
    }

    input[type="file"] {
      margin-top: 10px;
      margin-bottom: 14px;
    }

    #imgCanvas {
      border: 2px solid #333;
      cursor: crosshair;
      max-width: 100%;
      border-radius: 6px;
      background: white;
    }

    .btn {
      padding: 10px 18px;
      border-radius: 8px;
      background: #2563eb;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 15px;
      margin-top: 10px;
    }

    .btn:hover { background: #1e40af; }

    .btn:disabled {
      opacity: .6;
      cursor: not-allowed;
    }

    #messages {
      white-space: pre-wrap;
      background: #f0f2f5;
      padding: 12px 14px;
      border-radius: 6px;
      margin-top: 12px;
      font-size: 14px;
      min-height: 40px;
    }

    #annotated {
      max-width: 100%;
      border: 1px solid #ccc;
      margin-top: 14px;
      border-radius: 8px;
      display: block;
    }
  </style>
</head>

<body>

  <h2>Module 1: Camera Calibration & Object Measurement</h2>

  <!-- =================== CALIBRATION =================== -->
  <section id="calib">
    <h3>1) Camera Calibration (upload chessboard images)</h3>
    <p>Upload ~5‚Äì10 chessboard images taken from multiple angles.</p>

    <form id="calibForm">
      <input type="file" id="calibFiles" name="files[]" multiple accept="image/*">

      <div style="margin-top:10px;">
        <label>Pattern inner corners:</label><br>
        <input name="pattern_cols" value="7" style="width:70px"> √ó
        <input name="pattern_rows" value="5" style="width:70px">
      </div>

      <button class="btn" id="runCalib" style="margin-top:12px;">Run Calibration</button>
    </form>

    <div id="calibResult" style="margin-top:12px;"></div>
  </section>

  <!-- =================== MEASUREMENT =================== -->
  <section id="measure">
    <h3>2) Measure Object (click 4 corners)</h3>
    <p>Upload the object image, click four corner points, then click "Measure".</p>

    <input type="file" id="objFile" accept="image/*">

    <div style="margin-top:14px;">
      <canvas id="imgCanvas"></canvas>
    </div>

    <div style="margin-top:14px;">
      <button class="btn" id="clearPoints">Clear Points</button>

      <label style="margin-left:20px;">
        <input type="checkbox" id="useCalib" checked>
        Use last saved calibration
      </label>
    </div>

    <div style="margin-top:14px;">
      <label>fx (px): <input id="fxInput" style="width:120px"></label>
      <label style="margin-left:12px;">fy (px): <input id="fyInput" style="width:120px"></label>
      <label style="margin-left:12px;">Distance (cm): <input id="distanceInput" style="width:100px"></label>
    </div>

    <button class="btn" id="measureBtn" style="margin-top:16px;">Measure</button>

    <div id="messages"></div>
    <img id="annotated" alt="">
  </section>

  <!-- =================== DEMO VIDEO =================== -->
  <section>
    <h3 style="text-align:center; margin-bottom:14px;">üìΩÔ∏è Module 1 ‚Äì Demo</h3>

    <div style="
      width: 100%;
      max-width: 900px;
      margin: auto;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0px 4px 14px rgba(0,0,0,0.25);
    ">
      <iframe
        src="https://drive.google.com/file/d/15hQLd0S-Z_jzfk4LACEf2oyjT5D2q8JB/preview"
        allow="autoplay; fullscreen"
        allowfullscreen
        style="
          width: 100%;
          height: 500px;
          border: none;
        ">
      </iframe>
    </div>

  </section>

  <script src="/static/app.js"></script>

</body>
</html>
